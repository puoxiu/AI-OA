

## Rediså­˜å‚¨ä¼šè¯ç»“æ„ç¤ºä¾‹

### ç”¨æˆ·ä¼šè¯åˆ—è¡¨
> å­˜å‚¨æ¯ä¸ªç”¨æˆ·çš„æ‰€æœ‰çš„ä¼šè¯

> egï¼š ç”¨æˆ·ID=12345 çš„ä¼šè¯åˆ—è¡¨

```json
Key: user_sessions:12345
Type: Hash
Value:
{
   "session_001": '{"session_id":"session_001","last_message":"ä½ å¥½...","last_timestamp":"2025-08-21T14:05"}',
   "session_002": '{"session_id":"session_002","last_message":"å¸®æˆ‘å†™ä¸ªPythonä»£ç ","last_timestamp":"2025-08-21T14:07"}'
}


```

### ä¼šè¯è¯¦æƒ…
> å­˜å‚¨æ¯ä¸ªä¼šè¯çš„è¯¦ç»†ä¿¡æ¯ï¼ŒğŸ‘‰ ç”¨æ¥å±•ç¤ºæŸä¸ªä¼šè¯é‡Œçš„å®Œæ•´èŠå¤©è®°å½•
> egï¼š ä¼šè¯ID=session_001 çš„ä¼šè¯è¯¦æƒ…

```json
Key: conversation:12345:session_001
Type: List
Value:
[
   '{"role":"user","content":"ä½ å¥½"}',
   '{"role":"assistant","content":"ä½ å¥½ï¼Œæˆ‘èƒ½å¸®ä½ ä»€ä¹ˆï¼Ÿ"}',
   '{"role":"user","content":"ä»Šå¤©å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ"}',
   '{"role":"assistant","content":"ä»Šå¤©æ™´å¤©ï¼Œæ°”æ¸©25åº¦"}'
]

```


### å…³ç³»å›¾

> ä¼šè¯åˆ—è¡¨ ğŸ‘‰ ä¼šè¯è¯¦æƒ…
> ä¼šè¯è¯¦æƒ… ğŸ‘‰ ä¼šè¯æ¶ˆæ¯

```less
[ user_sessions:12345 ]   --->   [ conversation:12345:session_001 ]
      (ä¼šè¯ç´¢å¼•)                   (å…·ä½“èŠå¤©è®°å½•)
           |
           +--------------------> [ conversation:12345:session_002 ]
```

* user_sessions:{user_id} æ˜¯ç›®å½•/ç´¢å¼•è¡¨ï¼Œå­˜æ”¾ç”¨æˆ·æœ‰å“ªäº›ä¼šè¯ï¼Œä»¥åŠæ¯ä¸ªä¼šè¯çš„æœ€è¿‘ä¸€å¥è¯å’Œæ—¶é—´ã€‚
* conversation:{user_id}:{session_id} æ‰æ˜¯å®é™…èŠå¤©å†…å®¹ï¼Œå­˜æ”¾æ¶ˆæ¯çš„é¡ºåºåˆ—è¡¨ã€‚

